<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë„í˜• ë©”ëª¨ë¦¬ ê²Œì„</title>
  <style>
    body {
      font-family: "Nanum Gothic", sans-serif;
      background-color: #fff8e1;
      text-align: center;
      padding: 30px;
    }
    h1 {
      color: #ff8a65;
    }
    .game-board {
      display: grid;
      grid-template-columns: repeat(4, 120px);
      grid-gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }
    .card {
      background-color: #ffd180;
      border-radius: 15px;
      width: 120px;
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 12px;
      cursor: pointer;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
      user-select: none;
      text-align: center;
      white-space: pre-line;
      padding: 5px;
    }
    .flipped {
      background-color: #fff9c4;
    }
    .matched {
      background-color: #a5d6a7;
      color: white;
      cursor: default;
    }
    #timer {
      font-size: 20px;
      font-weight: bold;
      color: #d84315;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1 id="stage-title">â–  ë„í˜• êµ¬ì„±ìš”ì†Œ ë©”ëª¨ë¦¬ ê²Œì„ (1ë‹¨ê³„) â– </h1>
  <div id="timer">ì œí•œì‹œê°„: 2:00</div>
  <div class="game-board" id="gameBoard"></div>

  <audio id="successSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5c23405f62.mp3?filename=correct-2-46134.mp3"></audio>
  <audio id="failSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_13288cc59f.mp3?filename=error-2-36020.mp3"></audio>
  <audio id="clearSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_d26ac7c1e6.mp3?filename=success-fanfare-trumpets-6185.mp3"></audio>

  <script>
    let stage = 1;

    const stagePairs = {
      1: [
        { name: "ì‚¼ê°ê¸°ë‘¥", info: "ë©´ 5ê°œ\nëª¨ì„œë¦¬ 9ê°œ\nê¼­ì§“ì  6ê°œ" },
        { name: "ì‚¬ê°ê¸°ë‘¥", info: "ë©´ 6ê°œ\nëª¨ì„œë¦¬ 12ê°œ\nê¼­ì§“ì  8ê°œ" },
        { name: "ì˜¤ê°ê¸°ë‘¥", info: "ë©´ 7ê°œ\nëª¨ì„œë¦¬ 15ê°œ\nê¼­ì§“ì  10ê°œ" },
        { name: "ìœ¡ê°ê¸°ë‘¥", info: "ë©´ 8ê°œ\nëª¨ì„œë¦¬ 18ê°œ\nê¼­ì§“ì  12ê°œ" },
        { name: "ì‚¼ê°ë¿”", info: "ë©´ 4ê°œ\nëª¨ì„œë¦¬ 6ê°œ\nê¼­ì§“ì  4ê°œ" },
        { name: "ì‚¬ê°ë¿”", info: "ë©´ 5ê°œ\nëª¨ì„œë¦¬ 8ê°œ\nê¼­ì§“ì  5ê°œ" },
        { name: "ì˜¤ê°ë¿”", info: "ë©´ 6ê°œ\nëª¨ì„œë¦¬ 10ê°œ\nê¼­ì§“ì  6ê°œ" },
        { name: "ìœ¡ê°ë¿”", info: "ë©´ 7ê°œ\nëª¨ì„œë¦¬ 12ê°œ\nê¼­ì§“ì  7ê°œ" }
      ],
      2: [
        { name: "ì¹ ê°ê¸°ë‘¥", info: "ë©´ 9ê°œ\nëª¨ì„œë¦¬ 21ê°œ\nê¼­ì§“ì  14ê°œ" },
        { name: "íŒ”ê°ê¸°ë‘¥", info: "ë©´ 10ê°œ\nëª¨ì„œë¦¬ 24ê°œ\nê¼­ì§“ì  16ê°œ" },
        { name: "êµ¬ê°ê¸°ë‘¥", info: "ë©´ 11ê°œ\nëª¨ì„œë¦¬ 27ê°œ\nê¼­ì§“ì  18ê°œ" },
        { name: "ì‹­ê°ê¸°ë‘¥", info: "ë©´ 12ê°œ\nëª¨ì„œë¦¬ 30ê°œ\nê¼­ì§“ì  20ê°œ" },
        { name: "ì¹ ê°ë¿”", info: "ë©´ 8ê°œ\nëª¨ì„œë¦¬ 14ê°œ\nê¼­ì§“ì  8ê°œ" },
        { name: "íŒ”ê°ë¿”", info: "ë©´ 9ê°œ\nëª¨ì„œë¦¬ 16ê°œ\nê¼­ì§“ì  9ê°œ" },
        { name: "êµ¬ê°ë¿”", info: "ë©´ 10ê°œ\nëª¨ì„œë¦¬ 18ê°œ\nê¼­ì§“ì  10ê°œ" },
        { name: "ì‹­ê°ë¿”", info: "ë©´ 11ê°œ\nëª¨ì„œë¦¬ 20ê°œ\nê¼­ì§“ì  11ê°œ" },
        { name: "ì‹­ì¼ê°ê¸°ë‘¥", info: "ë©´ 13ê°œ\nëª¨ì„œë¦¬ 33ê°œ\nê¼­ì§“ì  22ê°œ" },
        { name: "ì‹­ì¼ê°ë¿”", info: "ë©´ 12ê°œ\nëª¨ì„œë¦¬ 22ê°œ\nê¼­ì§“ì  12ê°œ" }
      ]
    };

    // ì´í•˜ JavaScript ì½”ë“œëŠ” ë™ì¼í•˜ê²Œ ìœ ì§€

    let cards = [];
    let flippedCards = [];
    let board = document.getElementById('gameBoard');
    let timerDisplay = document.getElementById('timer');
    let title = document.getElementById('stage-title');
    let timeLeft = 120;
    let timer;
    let isProcessing = false;

    const successSound = document.getElementById('successSound');
    const failSound = document.getElementById('failSound');
    const clearSound = document.getElementById('clearSound');

    function setupStage(stageNum) {
      board.innerHTML = "";
      flippedCards = [];
      isProcessing = false;
      clearInterval(timer);
      cards = [];
      timeLeft = stageNum === 1 ? 120 : 180;
      title.textContent = `â–  ë„í˜• êµ¬ì„±ìš”ì†Œ ë©”ëª¨ë¦¬ ê²Œì„ (${stageNum}ë‹¨ê³„) â– `;
      timerDisplay.textContent = `ì œí•œì‹œê°„: ${stageNum === 1 ? '2:00' : '3:00'}`;

      stagePairs[stageNum].forEach(pair => {
        cards.push({ type: 'name', content: pair.name, pairId: pair.name });
        cards.push({ type: 'info', content: pair.info, pairId: pair.name });
      });
      cards = cards.sort(() => Math.random() - 0.5);

      board.style.gridTemplateColumns = `repeat(${stageNum === 1 ? 4 : 6}, ${stageNum === 1 ? 120 : 100}px)`;

      cards.forEach((card, index) => {
        const div = document.createElement('div');
        div.classList.add('card');
        div.dataset.index = index;
        board.appendChild(div);
      });

      startTimer();
    }

    function startTimer() {
      timer = setInterval(() => {
        timeLeft--;
        const minutes = Math.floor(timeLeft / 60);
        const seconds = String(timeLeft % 60).padStart(2, '0');
        timerDisplay.textContent = `ì œí•œì‹œê°„: ${minutes}:${seconds}`;

        if (timeLeft <= 0) {
          clearInterval(timer);
          alert("ì‹œê°„ ì´ˆê³¼! ê²Œì„ ì˜¤ë²„ì…ë‹ˆë‹¤.");
          board.innerHTML = "";
        }
      }, 1000);
    }

    function checkGameClear() {
      const allMatched = [...board.children].every(card => card.classList.contains('matched'));
      if (allMatched) {
        clearInterval(timer);
        clearSound.play();
        setTimeout(() => {
          if (stage === 1) {
            alert("1ë‹¨ê³„ í´ë¦¬ì–´! ì´ì œ 2ë‹¨ê³„ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.");
            stage = 2;
            setupStage(2);
          } else {
            alert("ì¶•í•˜í•©ë‹ˆë‹¤! 2ë‹¨ê³„ë¥¼ ëª¨ë‘ í´ë¦¬ì–´í–ˆì–´ìš”! ğŸ‰");
          }
        }, 300);
      }
    }

    function flipCard(index) {
      if (isProcessing) return;

      const cardDiv = board.children[index];
      const card = cards[index];
      if (cardDiv.classList.contains('flipped') || cardDiv.classList.contains('matched')) return;

      cardDiv.textContent = card.content;
      cardDiv.classList.add('flipped');
      flippedCards.push({ index, card });

      if (flippedCards.length === 2) {
        isProcessing = true;
        const [first, second] = flippedCards;
        if (first.card.pairId === second.card.pairId && first.index !== second.index) {
          setTimeout(() => {
            board.children[first.index].classList.add('matched');
            board.children[second.index].classList.add('matched');
            successSound.play();
            flippedCards = [];
            isProcessing = false;
            checkGameClear();
          }, 400);
        } else {
          setTimeout(() => {
            board.children[first.index].textContent = "";
            board.children[second.index].textContent = "";
            board.children[first.index].classList.remove('flipped');
            board.children[second.index].classList.remove('flipped');
            failSound.play();
            flippedCards = [];
            isProcessing = false;
          }, 800);
        }
      }
    }

    board.addEventListener('click', e => {
      if (!e.target.classList.contains('card')) return;
      const index = e.target.dataset.index;
      flipCard(index);
    });

    setupStage(1);
  </script>
</body>
</html>
